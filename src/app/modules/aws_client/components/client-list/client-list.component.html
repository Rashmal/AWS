<!--Main client list-->
<div class="card clients_main">
    <!--Filter Section-->
    <div class="filter_section row">
        <!--Add new item-->
        <div class="col-lg-3 add_new">
            <button (click)="onClickClientModifications('NEW', 0)">+ Add New Client</button>
        </div>
        <!--End of Add new item-->

        <!--Person type-->
        <div class="col-lg-3 filter_item" >
            <label>Filter by : </label>
            <p-dropdown 
            [options]="personTypes" 
            [(ngModel)]="filter.Param1" 
            (onChange)="onChangeFilter('DRP')"
            />
        </div>
        <!--End of Person type-->
        <!--Search by name-->
        <div class="col-lg-3 filter_item">
            <label>Client name : </label>
            <input type="text"  [(ngModel)]="filter.SearchQuery" (change)="onChangeFilter('SEARCH')"/>
        </div>
        <!--End of Search by name-->

        <!--Items per page-->
        <div class="col-lg-3 filter_item">
            <label>Records Per Page : </label>
            <input type="number" min="1" [(ngModel)]="filter.RecordsPerPage" (change)="onChangeFilter('RPP')"/>
        </div>
        <!--Items per page-->

    </div>
    <!--End of Filter Section-->

    <!--Client list table-->
    <p-table [value]="clientList" styleClass="p-datatable-striped" [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header" class="table_header">
            <tr class="table_header_row">
                <th class="header_col created_details">Created By</th>
                
                <th class="header_col">Full Name</th>
                <th class="header_col">Contacts</th>
                <th class="header_col">Payment Term</th>
                <th class="header_col">Address</th>
                <th class="header_col">Notes</th>
                <th class="header_col">Account</th>
                <th class="header_col">Action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-client>
            <tr  class="table_body">
                <td class="created_details">
                    <div>{{client.CreatedBy}}</div>
                    <div class="created_date_txt">(on {{client.CreatedDate | date : 'MMM d, y, h:mm:ss a'}})</div>
                </td>
                <td>{{client.FullName}}</td>
                <td>
                    <div *ngFor="let contact of client.Contacts">
                        <span>{{contact.ContactType.Name}}: </span><span>{{contact.ContactValue}}</span>
                    </div>
                </td>
                <td>{{client.PaymentTerm}}</td>
                <td>{{client.BillingAddress}}</td>
                <td>{{client.FinancialNotes}}</td>
                <td>{{client.ExpenseAccount}}</td>
                <td class="action_button">
                    <button class="green_btn"(click)="onClickClientModifications('VIEW', client.Id)"><i class="fa fa-eye" aria-hidden="true"></i></button>
                    <button class="blue_btn" (click)="onClickClientModifications('EDIT', client.Id)"><i class="fa fa-pencil" aria-hidden="true"></i></button>
                    <button class="red_btn"><i class="fa fa-trash" aria-hidden="true"></i></button>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <!--End of Client list table-->

     <!-- Pagination section -->
     <p-paginator class="paginator_sec" #modulePaginator *ngIf="clientList && clientList.length > 0 && clientList[0].TotalRecords > filter.RecordsPerPage"
     [ngClass]="(clientList && clientList.length > 0 && clientList[0].TotalRecords > 10)?'':'display_hide'"
     [rows]="filter.RecordsPerPage" (onPageChange)="onPageChange($event)"
     [totalRecords]="(clientList.length>0)? clientList[0].TotalRecords:0"></p-paginator>
 <!-- End of Pagination section -->

</div>
<!--End of Main client list-->
