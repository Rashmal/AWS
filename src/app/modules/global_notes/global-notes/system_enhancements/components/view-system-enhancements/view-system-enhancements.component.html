<!-- Main content section -->
<div class="col-xl-12 view_system_enhancement_list">
    <!-- Title and Filter section -->
    <div class="col-xl-12 title_filter_section">
        <!-- Title section -->
        <div class="marginRight5 marginBottom5 marginTop5 main_title_width">
            <i class="fa fa-comments title_icon_color" aria-hidden="true"></i>
            <span class="module_title">System Enhancement</span>
        </div>
        <!-- End of Title section -->

        <!-- Add button section -->
        <div class="marginRight5 marginBottom5 marginTop5">
            <button class="add_button" (click)="addNewSystemEnhancementClick()">+Add new</button>
        </div>
        <!-- End of Add button section -->

        <!-- Staff dropdown list -->
        <div class="marginRight5 display_flex_center marginBottom5 marginTop5"
            *ngIf="viewStaffDropdownList && viewStaffDropdownList.length > 0">
            <div class="label_section">
                <span class="marginRight5">Staff</span>
            </div>
            <p-dropdown [options]="viewStaffDropdownList" [(ngModel)]="filter.StaffId"></p-dropdown>
        </div>
        <!-- End of Staff dropdown list -->

        <!-- Priority dropdown list -->
        <div class="marginRight5 display_flex_center marginBottom5 marginTop5"
            *ngIf="viewPriorityDropdownList && viewPriorityDropdownList.length > 0">
            <div class="label_section">
                <span class="marginRight5">Priority</span>
            </div>
            <p-dropdown [options]="viewPriorityDropdownList" [(ngModel)]="filter.PriorityId"></p-dropdown>
        </div>
        <!-- End of Priority dropdown list -->

        <!-- Start date section-->
        <div class="marginRight5 display_flex_center marginBottom5 marginTop5">
            <div class="label_section">
                <span class="marginRight5">Start</span>
            </div>
            <p-calendar [(ngModel)]="filter.StartDate" [iconDisplay]="'input'" [showIcon]="true"></p-calendar>
        </div>
        <!-- End of Start date section -->
    </div>
    <!-- End of Title and Filter section -->

    <!-- Search and Filter section -->
    <div class="col-xl-12 title_filter_section">
        <!-- Search box section -->
        <div class="display_flex_center marginRight5 marginBottom5 marginTop5 main_title_width">
            <!-- Search input box -->
            <input type="search" placeholder="Search...">
            <!-- End of Search input box -->

            <!-- Search icon -->
            <div class="ash_color_button">
                <!-- Icon-->
                <i class="fa fa-search" aria-hidden="true"></i>
                <!-- End of Icon-->
            </div>
            <!-- End of Search icon -->

            <!-- Erase icon -->
            <div class="ash_color_button">
                <!-- Icon-->
                <i class="fa fa-eraser" aria-hidden="true"></i>
                <!-- End of Icon-->
            </div>
            <!-- End of Erase icon -->
        </div>
        <!-- End of Search box section -->

        <!-- No of records per page dropdown -->
        <div class="marginRight5 display_flex_center marginBottom5 marginTop5"
            *ngIf="recordsPerPage && recordsPerPage.length > 0">
            <p-dropdown [options]="recordsPerPage" [(ngModel)]="filter.RecordsPerPage"></p-dropdown>
        </div>
        <!-- End of No of records per page dropdown -->

        <!-- Status dropdown list -->
        <div class="marginRight5 display_flex_center marginBottom5 marginTop5"
            *ngIf="viewStatusDropdownList && viewStatusDropdownList.length > 0">
            <div class="label_section">
                <span class="marginRight5">Status</span>
            </div>
            <p-dropdown [options]="viewStatusDropdownList" [(ngModel)]="filter.StatusId"></p-dropdown>
        </div>
        <!-- End of Status dropdown list -->

        <!-- Modules dropdown list -->
        <div class="marginRight5 display_flex_center marginBottom5 marginTop5"
            *ngIf="viewModulesDropdownList && viewModulesDropdownList.length > 0">
            <div class="label_section">
                <span class="marginRight5">Module</span>
            </div>
            <p-dropdown [options]="viewModulesDropdownList" [(ngModel)]="filter.ModuleId"></p-dropdown>
        </div>
        <!-- End of Modules dropdown list -->

        <!-- End date section-->
        <div class="marginRight5 display_flex_center marginBottom5 marginTop5">
            <div class="label_section">
                <span class="marginRight5">End</span>
            </div>
            <p-calendar [(ngModel)]="filter.EndDate" [iconDisplay]="'input'" [showIcon]="true"></p-calendar>
        </div>
        <!-- End of End date section -->
    </div>
    <!-- End of Search and Filter section -->

    <!-- Stat boxes section -->
    <div class="col-xl-12 stats_boxes_section">
        <!-- Loop through the stat boxes list -->
        <div class="stat_box_section" *ngFor="let statBox of statBoxesList"
            [style.borderColor]="statBox.LabelColorCode">
            <!-- Count section -->
            <div>
                {{statBox.LabelValue}}
            </div>
            <!-- End of Count section -->

            <!-- Stat box label section -->
            <div>
                <span>{{statBox.LabelName}}</span>
            </div>
            <!-- End of Stat box label section -->
        </div>
        <!-- End of Loop through the stat boxes list -->
    </div>
    <!-- End of Stat boxes section -->

    <!-- Table section -->
    <div class="col-xl-12">
        <!-- Prime ng table -->
        <p-table [value]="displayTable" dataKey="name" [tableStyle]="{ 'min-width': '60rem' }">
            <!-- Header section -->
            <ng-template pTemplate="header">
                <!-- Header row section -->
                <tr>
                    <th>No:</th>
                    <th class="title_content">Title</th>
                    <th class="text_center">Status</th>
                    <th class="text_center">Start Date</th>
                    <th class="text_center">End Date</th>
                    <th class="text_center">Est.Hrs.</th>
                    <th class="text_center">Priority</th>
                    <th class="text_center">Requested By</th>
                    <th class="justify_center action_column">Action</th>
                </tr>
                <!-- End of Header row section -->
            </ng-template>
            <!-- End of Header section -->

            <!-- Modules table body section -->
            <ng-template pTemplate="body" let-moduleData let-rowIndex="rowIndex">
                <!-- Body row section -->
                <tr class="table_row" (click)="clickOnModule(moduleData.Module)">
                    <td>
                        <div class="module_row paddingLeft5 cursor_pointer">
                            {{(rowIndex+1)}}
                        </div>
                    </td>
                    <td colspan="9">
                        <div class="module_row module_display_section paddingRight5 cursor_pointer">
                            <span>{{moduleData.Module.Name}}</span>
                            <i *ngIf="filter.ModuleId != moduleData.Module.Id" class="fa fa-angle-double-down"
                                aria-hidden="true"></i>
                            <!-- <i *ngIf="filter.ModuleId == moduleData.Module.Id" class="fa fa-angle-double-up"
                                aria-hidden="true"></i> -->
                        </div>

                    </td>






                </tr>
                <!-- End of Body row section -->

                <!-- Enhancement list for module-->
                <tr *ngFor="let enhancement of moduleData.ExpandedContent; let eRowIndex = index">
                    <td>
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="paddingLeft5 ">
                            {{(rowIndex+1)}}. {{(eRowIndex+1)}}
                        </div>
                    </td>
                    <td class="title_content">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="expanded_content_title paddingRight5 cursor_pointer ">
                            {{enhancement.Title}}

                        </div>

                    </td>
                    <td class="text_center">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="module_display_section paddingRight5 ">
                            <span>{{enhancement.StatusName}}</span>

                        </div>

                    </td>
                    <td class="text_center">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="module_display_section paddingRight5 ">
                            <span>{{enhancement.StartDate| date: 'dd-MMM-yyyy'}}</span>

                        </div>

                    </td>
                    <td class="text_center">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="module_display_section paddingRight5 ">
                            <span>{{enhancement.EndDate| date: 'dd-MMM-yyyy'}}</span>

                        </div>

                    </td>
                    <td class="text_center">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="module_display_section paddingRight5 ">
                            <span>{{enhancement.EstimatedHours}}</span>

                        </div>

                    </td>
                    <td class="text_center">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="module_display_section paddingRight5 ">
                            <span>{{enhancement.PriorityName}}</span>

                        </div>

                    </td>
                    <td class="text_center">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="module_display_section paddingRight5 ">
                            <span>{{getRequestByNames(enhancement)}}</span>

                        </div>

                    </td>
                    <td class="action_column">
                        <div [ngClass]="eRowIndex%2 == 0 ? 'enh_module_row_w' : 'enh_module_row_g'"
                            class="module_display_section paddingRight5 action_button">
                            <!--Comments button-->
                            <button class="button_green"><i class="fa fa-comments" aria-hidden="true"></i></button>
                            <!--End of Comments button-->
                            <!--Change history button-->
                            <button class="button_orange"><i class="fa fa-history" aria-hidden="true"></i></button>
                            <!--End of Change history button-->
                            <!--Edit button-->
                            <button class="button_blue"><i class="fa fa-pencil" aria-hidden="true"></i></button>
                            <!--End of Edit button-->
                            <!--Delete button-->
                            <button class="button_red"><i class="fa fa-trash" aria-hidden="true"></i></button>
                            <!--End of Delete button-->
                            <!--Send feature list button-->
                            <button class="button_grey"><i class="fa fa-archive" aria-hidden="true"></i></button>
                            <!--End of Send feature list button-->

                        </div>

                    </td>
                </tr>
                <!-- End of Enhancement list for module-->
                <!-- Pagination section -->
                <tr *ngIf="filter.ModuleId == moduleData.Module.Id">
                   <td colspan="9">
                    <p-paginator  (onPageChange)="onEnhancementPageChange($event)" [first]="1" [rows]="10" [totalRecords]="120"
                    [rowsPerPageOptions]="[10, 20, 30]"></p-paginator>
                   </td>
                </tr>
                
                <!-- End of Pagination section -->

            </ng-template>
            <!-- End of Modules table body section -->
        </p-table>
        <!-- End of Prime ng table -->

        <!-- Pagination section -->
        <p-paginator (onPageChange)="onPageChange($event)" [first]="1" [rows]="10" [totalRecords]="120"
            [rowsPerPageOptions]="[10, 20, 30]"></p-paginator>
        <!-- End of Pagination section -->
    </div>
    <!-- End of Table section -->
</div>
<!-- End of Main content section -->